<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jeu de multiplication</title>
  <link rel="stylesheet" href="styles/bootstrap.min.css">
  <link rel="stylesheet" href="styles/default.css">
  <link rel="stylesheet" href="styles/style.css">
  <link rel="stylesheet" href="styles/projet03.css">
</head>

<body>
  <header class="py-2 px-4 bg-secondary">
    <div class="user-input-saver text-white">
      <div class="row">
        <div class="col-sm-6">
          <label>Nom & Pr√©nom</label>
          <input type="text" class="form-control save-content" placeholder="Nom & Pr√©nom">
        </div>
        <div class="col-sm-6">
          <label>Classe</label>
          <input type="text" class="form-control save-content" placeholder="Classe">
        </div>
      </div>
    </div>
  </header>
  <aside>
    <nav class="navbar navbar-expand-md navbar-dark bg-dark">
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#aside_navbar"
        aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span> Menu
      </button>
      <div class="collapse navbar-collapse" id="aside_navbar"></div>
    </nav>
  </aside>
  <main class="container my-4">
    <h1>Projet n¬∞3 - Jeu de multiplication</h1>

    <article>
      <h2>Exploration</h2>

      <section>
        <h3>Principe</h3>

        <div>
          <figure class="d-print-none">
            <img src="images/prj04/animation.gif" alt="Le jeu de multiplication">
            <figcaption>Le jeu de multiplication</figcaption>
          </figure>
          <figure class="d-none d-print-block">
            <img src="images/prj04/step0202-mini.png" alt="Le jeu de multiplication">
            <img src="images/prj04/step0201-mini.png" alt="Le jeu de multiplication">
            <figcaption>Le jeu de multiplication</figcaption>
          </figure>
        </div>

        <p>Mr Hatem, veut concevoir <strong>un programme √©ducatif</strong>, qui peut aider son fils, Isma√Øl, un √©colier
          en
          3<sup>√®me</sup> ann√©e de base, qui vient tout juste de commencer <strong>l'apperentissage de la table de
            multiplication</strong> en "Hissab".</p>

        <p>Le programme se d√©roule comme suit :</p>
        <ul>
          <li>Au d√©but, l'enfant choisit un nombre de 1 √† 10, pour s'exercer. Le programme va lui poser, par la suite,
            cinq questions portant sur la multiplication de ce nombre avec cinq nombres distincts choisis au hasard
            entre 1 et 10.</li>
          <li>Pour chaque question, le programme propose quatre r√©ponses diff√©rentes dont une seule est correcte.</li>
          <li>Isma√Øl, doit choisir sa r√©ponse parmi les propositions donn√©es.</li>
          <li>Le programme, f√©licite le petit gar√ßon s'il r√©pond correctement, sinon il lui indique la r√©ponse correcte.
          </li>
          <li>A la fin de la partie, le programme affiche le score sur cinq de l'√©colier.</li>
        </ul>
      </section>

      <section>
        <div class="d-print-none">
          <h3>Simulation</h3>

          <p>Tester cette version, pour un exemple de partie.</p>

          <div id="jeu-multiplication">
            <div class="step-1" v-if="step == 1">
              <div class="text-center my-4">S√©lectionner un nombre pour vous exercer ?</div>
              <div class="choices">
                <div class="choice" v-for="i in nombres" v-on:click="selectNumber(i)">{{i}}</div>
              </div>
            </div>
            <div class="step-2" v-if="step == 2 || step == 3">
              <div class="question-number">Question {{currentQuestion + 1}} / {{t.length}}</div>
              <div class="question">{{n}} &times; {{t[currentQuestion]}} = ?</div>
              <div class="choices">
                <div class="choice"
                  v-bind:class="{'correct': i == selectedAnswer && selectedAnswer == correctAnswer, 'incorrect': i == selectedAnswer && selectedAnswer != correctAnswer, 'correct-answer': i == correctAnswer && selectedAnswer != -1}"
                  v-for="(prop, i) in p" v-on:click="checkAnswer(i)">{{prop}}</div>
              </div>
              <div v-if="step == 3" class="feedback">{{message}}</div>
            </div>
            <div class="step-4" v-if="step == 4">
              <div class="fin">Termin√©</div>
              <div>Score</div>
              <div class="score">{{score}} / {{t.length}}</div>
              <div class="text-center"><button class="btn btn-primary w-75" v-on:click="resetGame()">Rejouer</button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section>
        <h3>Exemple d'ex√©cution</h3>

        <div class="d-print-none text-center">
          <video controls>
            <source src="images/prj04/multiplication.mp4" type="video/mp4">
            <source src="images/prj04/multiplication.mp4.webm" type="video/webm">
          </video>
        </div>

        <pre><code class="hljs nohighlight"><span class="d-print-none">  __  __         _  _    _         _  _              _    _               
 |  \/  |       | || |  (_)       | |(_)            | |  (_)              
 | \  / | _   _ | || |_  _  _ __  | | _   ___  __ _ | |_  _   ___   _ __  
 | |\/| || | | || || __|| || &apos;_ \ | || | / __|/ _` || __|| | / _ \ | &apos;_ \ 
 | |  | || |_| || || |_ | || |_) || || || (__| (_| || |_ | || (_) || | | |
 |_|  |_| \__,_||_| \__||_|| .__/ |_||_| \___|\__,_| \__||_| \___/ |_| |_|
                           | |                                            
                           |_|                                            


</span>
Choisir un nombre de [1, 10] ? 4

Question 1 / 5

4 x 8 = ?
a. 4
b. 16
c. 32
d. 24
Quelle est la bonne r√©ponse ? d
Non, c&apos;est faux ! La bonne r√©ponse est 32

<span class="d-print-none">Question 2 / 5

4 x 7 = ?
a. 28
b. 64
c. 27
d. 50
Quelle est la bonne r√©ponse ? 28
R√©ponse invalide
Quelle est la bonne r√©ponse ? a
Bravo, tu as devin√©!

Question 3 / 5

4 x 6 = ?
a. 24
b. 4
c. 6
d. 30
Quelle est la bonne r√©ponse ? a
Bravo, tu as devin√©!

Question 4 / 5

4 x 4 = ?
a. 16
b. 54
c. 20
d. 80
Quelle est la bonne r√©ponse ? a
Bravo, tu as devin√©!

Question 5 / 5

4 x 9 = ?
a. 81
b. 50
c. 36
d. 4
Quelle est la bonne r√©ponse ? b
Non, c&apos;est faux ! La bonne r√©ponse est 36
</span>
<span class="d-none d-print-inline">...</span>
Votre score est : 3 / 5
<span class="d-print-none">

   _____                    _  ____               
  / ____|                  | ||  _ \              
 | |  __   ___    ___    __| || |_) | _   _   ___ 
 | | |_ | / _ \  / _ \  / _` ||  _ &lt; | | | | / _ \
 | |__| || (_) || (_) || (_| || |_) || |_| ||  __/
  \_____| \___/  \___/  \__,_||____/  \__, | \___|
                                       __/ |      
                                      |___/       
</span>
</code></pre>
      </section>

      <section>
        <h3>Etapes du programme</h3>

        <ol type="a" class="order-items-exercise"
          data-enonce="Ordonner les √©tapes d'ex√©cution d'apr√®s les examples donn√©s pr√©c√©demment." data-isnumbered="true"
          hidden>
          <li data-ordre="6" data-place="true">Saisir la r√©ponse de l'utilisateur</li>
          <li data-ordre="4">Initialiser un tableau p avec 4 propositions dont une seule est correcte</li>
          <li data-ordre="5" data-place="true">Afficher la question, et les propositions</li>
          <li data-ordre="7">Si la r√©ponse est correcte, incr√©menter le score, sinon afficher la bonne r√©ponse</li>
          <li data-ordre="1" data-place="true">Saisir un nombre n entre 1 et 10</li>
          <li data-ordre="8" data-place="true">Afficher le score final</li>
          <li data-ordre="3" data-place="true">Pour chacun des nombres de t, refaire les √©tapes de 4 √† 7</li>
          <li data-ordre="2">Initialiser un tableau t avec 5 nombres al√©atoires diff√©rents entre 1 et 10</li>
        </ol>
      </section>
    </article>

    <article>
      <h2>Briques Logicielles</h2>

      <section>
        <h3>Saisir un nombre n entre 1 et 10</h3>

        
      </section>
    </article>

  </main>
  <footer class="d-print-none bg-dark text-white p-2">
    <div class="text-center">Page cr√©√©e avec ‚ô• par Mohamed Anis MANI</div>
    <div class="text-center small">Ann√©e scolaire : 2020/2021</div>
  </footer>
  <script src="scripts/jquery.min.js"></script>
  <script src="scripts/bootstrap.min.js"></script>
  <script src="scripts/highlight.pack.js"></script>
  <script src="scripts/hljs.algorithm.js"></script>
  <script src="scripts/draggable.js"></script>
  <script src="scripts/clipboard.min.js"></script>
  <script src="scripts/pages.js"></script>
  <script src="scripts/savecontent.js"></script>
  <script src="scripts/vue.min.js"></script>
  <script>
    hljs.initHighlightingOnLoad();
    document.querySelectorAll('.language-algorithm,.language-python')
      .forEach(item => {
        const div = document.createElement('div');
        div.className = 'bd-clipboard d-print-none';
        const btn = document.createElement('button');
        btn.className = 'btn-clipboard';
        btn.textContent = "üìã";
        btn.title = "Copier";
        div.appendChild(btn);
        item.parentElement.insertBefore(div, item);
      });
    new ClipboardJS('.btn-clipboard', {
      target: (trigger) => {
        return trigger.parentElement.nextElementSibling;
      }
    });
    $(() => {
      const localStore = new PagePersistance();
      const serverStore = new ServerSaves('Projet 3');
      const userInputSaver = new UserInputSaver(
        document.querySelector('.user-input-saver'),
        localStore,
        serverStore);
      new Vue({
        el: '#jeu-multiplication',
        data: {
          step: 1,
          nombres: new Array(10).fill(0).map((v, i) => i + 1),
          t: [],
          p: [],
          n: null,
          selectedAnswer: 0,
          correctAnswer: 0,
          currentQuestion: 0,
          score: 0,
          message: ""
        },
        mounted: function () {
        },
        methods: {
          resetGame: function () {
            this.step = 1;
          },
          selectNumber: function (n) {
            this.n = n;
            this.score = 0;
            this.selectRandomNumbers();
            this.selectQuestion(0);
          },
          selectQuestion: function (nq) {
            this.currentQuestion = nq;
            this.step = 2;
            this.selectedAnswer = -1;
            this.selectRandomAnswers(this.t[nq] * this.n);
          },
          randint: function (d, f) {
            return Math.floor(Math.random() * (f - d + 1)) + d;
          },
          selectRandomNumbers: function () {
            this.t = [];
            for (let i = 0; i < 5; i++) {
              do {
                v = this.randint(1, 10);
              } while (this.t.includes(v));
              this.t[i] = v;
            }
          },
          selectRandomAnswers: function (res) {
            this.p = [];
            for (let i = 0; i < 4; i++) {
              let v1 = 0;
              let v2 = 0;
              let mul = 0;
              do {
                v1 = this.randint(1, 10);
                v2 = this.randint(1, 10);
                mul = v1 * v2;
              } while (this.p.includes(mul) || mul == res);
              this.p[i] = mul;
            }
            this.correctAnswer = this.randint(0, 3);
            this.p[this.correctAnswer] = res;
          },
          checkAnswer: function (index) {
            if (this.selectedAnswer != -1) {
              return;
            }
            this.selectedAnswer = index;
            if (index == this.correctAnswer) {
              this.message = "Bravo, tu as devin√© !";
              this.score += 1;
            } else {
              this.message = "D√©sol√©, ta r√©ponse est fausse.";
            }
            this.step = 3;
            setTimeout(() => {
              if (this.currentQuestion < this.t.length - 1) {
                this.selectQuestion(this.currentQuestion + 1);
              } else {
                this.step = 4;
              }
            }, 1500);
          }
        }
      });
    });
  </script>
</body>

</html>